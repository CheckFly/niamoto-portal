var olext={control:{}};olext.control.CurrentScale=function(a){a=a||{};var c=document.createElement("div");c.className="olext-current_scale ol-control";ol.control.Control.call(this,{element:c,target:a.target,render:function(a){a=this.getMap();var d=a.getView(),e=d.calculateExtent(a.getSize()),d=d.getResolution(),e=e[2]-e[0];a=document.getElementById(a.getTarget()).clientWidth;c.innerHTML="1:"+(3779.5275590551178/a*e*d).toFixed(0)+"m"}})};ol.inherits(olext.control.CurrentScale,ol.control.Control);olext.control.LayersVisibility=function(a){function c(a,b){return function(c){a.setVisible(b.checked)}}a=a||{};var b=a.layers||[],d=a.labels||[],e=a.initial_states||[];this._layers=[];this._labels=[];this._checkboxes=[];this._checkboxes_element=document.createElement("form");this._checkboxes_element.className="olext-layers_visibility ol-control";this.addLayer=function(a,b,d){var e=document.createElement("li"),f=document.createElement("label"),g=document.createElement("input");g.type="checkbox";g.checked=
d;g.id="olext-layer_visibility-checkbox_"+b;f.htmlFor=g.id;f.innerHTML=b;e.appendChild(f);e.appendChild(g);this._checkboxes_element.appendChild(e);this._checkboxes.push(g);this._labels.push(b);this._layers.push(a);a=c(a,g);g.addEventListener("change",a);a()};for(var f=0;f<b.length;f++)this.addLayer(b[f],d[f],e[f]);ol.control.Control.call(this,{element:this._checkboxes_element,target:a.target})};ol.inherits(olext.control.LayersVisibility,ol.control.Control);olext.control.ProgressBar=function(a){a=a||{};this.progress_container=document.createElement("div");this.progress_container.className="olext-progress_bar ol-control";this.progress=document.createElement("progress");this.progress.className="olext-progress_bar-progress";this.progress.value=0;this.progress.max=100;this.label_element=document.createElement("span");this.label_element.className="olext-progress_bar-label";this.progress_container.appendChild(this.progress);this.progress_container.appendChild(this.label_element);
ol.control.Control.call(this,{element:this.progress_container,target:a.target})};ol.inherits(olext.control.ProgressBar,ol.control.Control);olext.control.ProgressBar.prototype.setValue=function(a){this.progress.value=a};olext.control.ProgressBar.prototype.setLabel=function(a){this.label_element.innerHTML=a};olext.control.SetScale=function(a,c){if(!a)throw Error("The scale must be defined.");var b=c||{},d=document.createElement("button"),e=this;d.innerHTML="1:"+a;d.addEventListener("click",function(b){var c=e.getMap();b=c.getView();var d=b.calculateExtent(c.getSize()),f=b.getResolution(),d=d[2]-d[0],c=c.getTarget(),c=document.getElementById(c).clientWidth;b.setResolution(Math.sqrt(f*f/(3779.5275590551178/c*d*f)*a))},!1);var f=document.createElement("div");f.appendChild(d);f.className="olext-set_scale ol-unselectable ol-control";
ol.control.Control.call(this,{element:f,target:b.target})};ol.inherits(olext.control.SetScale,ol.control.Control);olext.overlay={};
olext.overlay.Popup=function(a){var c=a.positioning,b=a.autoPan,d=a.autoPanAnimation;this.hide_callback=a.hide_callback;this.show_callback=a.show_callback;this.popup_element=document.createElement("div");this.popup_element.className="olext-popup";this.popup_title=document.createElement("p");this.popup_title.className="olext-popup-title";this.popup_closer=document.createElement("a");this.popup_closer.className="olext-popup-closer";this.popup_closer.href="#";this.popup_content=document.createElement("div");this.popup_content.className=
"olext-popup-content";this.popup_element.appendChild(this.popup_closer);this.popup_element.appendChild(this.popup_title);this.popup_element.appendChild(this.popup_content);var e=this;this.popup_closer.addEventListener("click",function(a){e.setPosition(void 0);e.hide_callback&&e.hide_callback()});ol.Overlay.call(this,{element:this.popup_element,positioning:c,autoPan:b,autoPanAnimation:d})};ol.inherits(olext.overlay.Popup,ol.Overlay);
olext.overlay.Popup.prototype.show=function(a,c,b,d){this.popup_title.innerHTML=c;this.popup_content.innerHTML=b;this.setPosition(a);d?d():this.show_callback&&this.show_callback();return this};olext.overlay.Popup.prototype.hide=function(a){this.setPosition(void 0);a?a():this.hide_callback&&this.hide_callback();return this};olext.overlay.Popup.prototype.setTitle=function(a){this.popup_title.innerHTML=a};olext.overlay.Popup.prototype.setContent=function(a){this.popup_content.innerHTML=a};olext.utils={};olext.utils.hexToRGBA=function(a,c){var b=ol.color.asArray(a),b=b.slice();b[3]=c;return["rgba(",b.join(","),")"].join("")};
olext.utils.makeStyle=function(a){var c=a||{};a={};var b=c.fill_color;b&&(b=new ol.style.Fill({color:b}),a.fill=b);var b=c.stroke_color,d=c.stroke_width;if(b||d)b=new ol.style.Stroke({color:b,width:d}),a.stroke=b;(b=c.image)&&(a.image=b);if(b=c.text_value){var d=c.text_font,e=c.text_fill_color,f;e&&(f=new ol.style.Fill({color:e}));e=c.text_stroke_color;c=c.text_stroke_width;if(e||c)text_stroke=new ol.style.Stroke({color:e,width:c});f=new ol.style.Text({text:b,font:d,fill:f,stroke:text_stroke});a.text=
f}return new ol.style.Style(a)};olext.utils.makeCircle=function(a){a=a||{};var c={};c.radius=a.radius;var b=a.fill_color;b&&(b=new ol.style.Fill({color:b}),c.fill=b);var b=a.stroke_color,d=a.stroke_width;if(b||d)b=new ol.style.Stroke({color:b,width:d}),c.stroke=b;c.snapToPixel=a.snapToPixel;return new ol.style.Circle(c)};olext.utils.makeGeoJSONLayer=function(a,c){var b=c||{},d=b.image_vector,e=new ol.source.Vector({features:(new ol.format.GeoJSON).readFeatures(a)});b.source=e;return d?new ol.layer.Image({source:new ol.source.ImageVector(b)}):new ol.layer.Vector(b)};olext.utils.makeTopoJSONLayer=function(a,c){var b=c||{},d=b.image_vector,e=new ol.source.Vector({features:(new ol.format.TopoJSON).readFeatures(a)});b.source=e;return d?new ol.layer.Image({source:new ol.source.ImageVector(b)}):new ol.layer.Vector(b)};
