(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.showPreloader=showPreloader;exports.hidePreloader=hidePreloader;function showPreloader(){document.getElementById("preloader").style.display="inline"}function hidePreloader(){document.getElementById("preloader").style.display="none"}},{}],2:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.taxonList=exports.shapeList=exports.plotList=void 0;var host=window.location.host;var protocol=window.location.protocol;var apiRoot=protocol+"//"+host+"/api/1.0";var plotList=apiRoot+"/Plot/";exports.plotList=plotList;var shapeList=apiRoot+"/Shape/";exports.shapeList=shapeList;var taxonList=apiRoot+"/Taxon/";exports.taxonList=taxonList},{}],3:[function(require,module,exports){"use strict";var restUrls=_interopRequireWildcard(require("../restUrls"));var preloader=_interopRequireWildcard(require("../preloader"));function _getRequireWildcardCache(){if(typeof WeakMap!=="function")return null;var cache=new WeakMap;_getRequireWildcardCache=function _getRequireWildcardCache(){return cache};return cache}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}var cache=_getRequireWildcardCache();if(cache&&cache.has(obj)){return cache.get(obj)}var newObj={};if(obj!=null){var hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;if(desc&&(desc.get||desc.set)){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj["default"]=obj;if(cache){cache.set(obj,newObj)}return newObj}var taxonList=restUrls.taxonList;function buildTaxonList(){var taxons={};$.ajax({type:"GET",data:{ordering:"name"},url:taxonList,success:function success(result){taxons=result.reduce(function(map,obj){map[obj.id]=obj;return map},{});var select=document.getElementById("taxon_select");result.map(function(x){var option=document.createElement("option");option.text=x.label;option.value=x.id;select.add(option)});$("#taxon_select").selectpicker({noneSelectedText:"Selectionnez une parcelle"});$("#taxon_select").selectpicker("val",null);$("#taxon_select").change(function(){preloader.showPreloader();updateData(taxons[this.value])});preloader.hidePreloader()}})}function updateData(taxon){$.ajax({type:"GET",url:taxonList+taxon.id+"/",success:function success(response){$("#taxon_select").trigger("taxonSelected",response);preloader.hidePreloader()}})}document.addEventListener("DOMContentLoaded",function(){$("#preloader").on("elementLoaded",function(event,data){preloader.hidePreloader()});buildTaxonList()})},{"../preloader":1,"../restUrls":2}]},{},[3]);
